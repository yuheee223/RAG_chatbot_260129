# RAG chatbot - 旅遊不便險

這是一個根據**單一 PDF 文件（海外不便險條款）**所打造的聊天機器人，採用 Retrieval-Augmented Generation (RAG) 架構。
系統會先從保險條款 PDF 中檢索與問題最相關的內容，再結合大型語言模型（LLM，gemini-2.5-flash）生成回答。

---

## Features

* 🔎 **Document Retrieval**：從向量資料庫中檢索最相關的文件片段
* 📄 **metadata**：自動判斷保險事件類型
* 🧠 **LLM Augmentation**：將檢索結果與使用者問題一起送入 LLM 生成回答
* 🛡️ **Reduced Hallucination**：回答基於實際文件內容

---

## System Architecture

```
User Query
   ↓
Embedding Model
   ↓
Vector Database 
   ↓
Relevant Documents
   ↓
LLM (with Prompt + Context)
   ↓
Final Answer
```

---

## Tech Stack

* **Language**: Python
* **LLM**:  HuggingFace 
* **Embedding**: Sentence-Transformers 
* **Vector DB**: FAISS / Chroma 
* **Framework**: LangChain 

---

## Example Usage

```
User: 什麼情況下可以申請旅遊延誤賠償？
Bot: 根據提供的保險條款內容，關於「旅遊延誤賠償」或「班機延誤賠償」的具體申請條件（例如延誤多久、何種原因造成）在條款中未明確規定。
條款中僅提及申請「班機延誤保險」所需檢具的文件：
*   理賠申請書。（第三十二條）
*   機票及登機證或航空業者出具之搭機證明。（第三十二條）
*   航空業者所出具載有班機延誤期間之證明。（第三十二條）

User: 行李遺失後應該如何申請理賠？
Bot: 依據您提供的保險條款內容，行李遺失後申請理賠的相關說明如下：
**一、理賠條件 (第三十九條)**
被保險人於海外旅行期間內，因下列事故致其所擁有且置於行李箱、手提箱或類似容器內之個人物品遭受滅失（包含遺失），本公司依本保險契約約定之保險金額給付保險金：
*   竊盜、強盜與搶奪。
*   交由所搭乘之公共交通工具業者託運且領有託運行李領取單之隨行託運行李，因該公共交通工具業者處理失當所致之毀損、滅失或遺失。
**二、理賠文件**
條款中未明確規定「行李損失保險」（包含行李遺失）應檢具之理賠文件

User: 哪些原因屬於不可理賠範圍？
Bot: 根據您提供的保險條款，以下為各險種不可理賠的範圍：
*   **【第六十三條 租車事故保險特別不保事項｜其他】**
    *   被保險人或駕駛人之故意行為。
    *   駕駛人受酒類、毒品或違禁藥物影響。
    *   從事汽車測速、競賽、表演或飆車行為。
    *   駕駛人未領有效期內之國際駕駛執照或當地駕駛執照。
    *   從事犯罪或逃避合法逮捕之行為。
*   **【第三十四條 旅程更改保險特別不保事項｜其他】**
    *   直接或間接因法令、政府命令所致之損失。
    *   因旅行社或公共交通工具業者破產、清算或債務不履行所致之損失。
    *   要保人或被保險人向本公司申請訂立保險契約時已發生之事故。
    *   發生保險事故後，直接或間接因被保險人怠於通知或未及時通知旅行社、安排被保險人旅行之人或提供旅行、住宿之業者所致之損失。
    *   被保險人未搭乘航空業者所提供之第一班替代交通工具（但因不可抗力因素致無法搭乘者不在此限）。
*   **【第七十一條 行動電話被竊損失保險特別不保事項｜其他】**
    *   行動電話之背蓋、電池等配件之滅失（但與行動電話本體同時滅失者，不在此限）。
    *   行動電話之遺失（被保險人無法證明行動電話確係由於強盜、搶奪及竊盜所致者視為遺失）。
    *   被保險人將行動電話租賃予他人。
    *   平板電腦、筆記型電腦或智慧型穿戴式裝置。

---

## Future Improvements

* [ ] Conversation memory
* [ ] 

---

## 小筆記

- ChromaDB metadata 不支援 list，使用 JSON 或拆條存儲
